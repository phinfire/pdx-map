<div #rendererContainer class="map-container">
    @if (!isReady()) {
    <div class="loading-indicator">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Loading map...</p>
    </div>
    }
    <div class="button-group-left">
        @for (btn of customButtons; track $index) {
        <button class="corner-button custom" (click)="buttonClicked.emit(btn); btn.action(); $event.stopPropagation()" [title]="btn.title"
            [class.active]="btn.canBeToggled && btn.isToggled">
            @if (btn.isImage) {
            <img [src]="btn.icon" [alt]="btn.title" class="button-icon">
            } @else {
            <mat-icon fontSet="material-symbols-outlined">{{ btn.icon }}</mat-icon>
            }
        </button>
        }
    </div>

    <div class="button-group-right">
        <button class="corner-button" (click)="fitCameraToPolygons(0); $event.stopPropagation()"
            title="Fit camera to view all polygons">
            <mat-icon>home</mat-icon>
        </button>
        <button class="corner-button" (click)="exportMapImage(); $event.stopPropagation()" title="Export map as image">
            <mat-icon>camera_alt</mat-icon>
        </button>
    </div>

    <div class="mesh-tooltip" [class.visible]="tooltipManager.isTooltipVisible()"
        [class.above]="tooltipManager.getTooltipPosition().above"
        [style.left.px]="tooltipManager.getTooltipPosition().x" [style.top.px]="tooltipManager.getTooltipPosition().y"
        [innerHTML]="tooltipManager.getTooltipContent()">
    </div>
</div>