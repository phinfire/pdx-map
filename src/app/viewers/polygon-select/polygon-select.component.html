<div #rendererContainer class="map-container">
    @if (!isReady()) {
        <div class="loading-indicator">
            <mat-spinner diameter="40"></mat-spinner>
            <p>Loading map...</p>
        </div>
    }
    
    <div class="button-group">
        <button class="corner-button" (click)="fitCameraToPolygons(0); $event.stopPropagation()" title="Fit camera to view all polygons">
            <mat-icon>home</mat-icon>
        </button>
        <button class="corner-button" (click)="refreshButtonClicked(); $event.stopPropagation()" title="Reset to initial selection">
            <mat-icon>refresh</mat-icon>
        </button>
    <!--
        <button class="corner-button" (click)="storeCurrentLockSelectionToFile(); $event.stopPropagation()" title="Save current selection">
            <mat-icon>save</mat-icon>
        </button>
        <button class="corner-button" (click)="loadSelectionFromFile(); $event.stopPropagation()" title="Load selection">
            <mat-icon>menu_book</mat-icon>
        </button>
    -->
        @if (colorConfigProviders.length > 1) {
            <button class="corner-button" (click)="toggleColorConfigProvider(); $event.stopPropagation()" title="Toggle color scheme">
                <mat-icon>palette</mat-icon>
            </button>
        }
        <button class="corner-button" (click)="exportMapImage(); $event.stopPropagation()" title="Export map as image">
            <mat-icon>camera_alt</mat-icon>
        </button>
        <button class="corner-button" 
                [class.active]="tooltipManager.isTooltipEnabled()"
                (click)="toggleTooltips(); $event.stopPropagation()" 
                [title]="tooltipManager.isTooltipEnabled() ? 'Disable tooltips' : 'Enable tooltips'">
            <mat-icon>{{ tooltipManager.isTooltipEnabled() ? 'chat_bubble' : 'chat_bubble_outline' }}</mat-icon>
        </button>
    </div>
    
    <div class="mesh-tooltip" 
         [class.visible]="tooltipManager.isTooltipVisible()"
         [class.above]="tooltipManager.getTooltipPosition().above"
         [style.left.px]="tooltipManager.getTooltipPosition().x" 
         [style.top.px]="tooltipManager.getTooltipPosition().y"
         [innerHTML]="tooltipManager.getTooltipContent()">
    </div>
</div>