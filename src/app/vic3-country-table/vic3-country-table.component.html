<table mat-table [dataSource]="dataSource" matSort>
    <ng-container *ngFor="let col of columns; let index = index" [matColumnDef]="col.def" [sticky]="index < 3">
        <th mat-header-cell *matHeaderCellDef [mat-sort-header]="col.sortable ? col.def : ''"
            [matTooltip]="col.tooltip" matTooltipClass="tooltip">
            {{col.header}}
        </th>
        <td mat-cell *matCellDef="let element; let i = index"
            [ngClass]="{'negative-cell': col.cellValue(element, i) < 0}">
            <span [matTooltip]="col.cellTooltip(element, i)"
                [matTooltipDisabled]="!showTooltips || !col.cellTooltip(element, i)"
                matTooltipClass="tooltip-secret">
                {{ col.visibleCellValue(element, i) }}
                <sub *ngIf="col.subscript && col.subscript(element)">
                    {{ col.subscript(element) }}
                </sub>
            </span>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>