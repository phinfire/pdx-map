<mat-toolbar>
    <!--<button mat-icon-button class="menu-button" aria-label="Menu" (click)="drawer.toggle()">
        <mat-icon>menu</mat-icon>
    </button>
-->
    <div class="spacer">
        <div class="hello-wrapper">
            @if (authService.isLoggedIn()) {
            <span class="hello">Hello,</span> <button mat-button class="username" (click)="navigate('')">{{
                authService.getLoggedInUser()!.global_name }}</button>
            } @else {
                <div style="padding: 0 2em"></div>
            <app-discord-login></app-discord-login>
            }
        </div>
    </div>
    <div class="menus-container">
        @for (menu of navMenus; track menu.label) {
        <button mat-button [matMenuTriggerFor]="dropdownMenu" class="toolbar-menu-button" [attr.aria-label]="menu.label"
            #menuTrigger="matMenuTrigger">
            {{ menu.label }}
            <mat-icon class="menu-chevron" [class.open]="menuTrigger.menuOpen">expand_more</mat-icon>
        </button>
        <mat-menu #dropdownMenu="matMenu">
            @for (item of menu.items; track item.path) {
            <button mat-menu-item (click)="navigate(item.path)" [disabled]="isActiveRoute(item.path)">
                <mat-icon fontSet="material-symbols-outlined">{{ item.icon }}</mat-icon>
                {{ item.label }}
            </button>
            }
        </mat-menu>
        }
        <button mat-icon-button [matMenuTriggerFor]="dropdownMenu" class="toolbar-menu-button"
            #menuTrigger="matMenuTrigger">
            <mat-icon>settings</mat-icon>
        </button>
        <mat-menu #dropdownMenu="matMenu">
            <button mat-menu-item (click)="openGitHubRepository()">
                <mat-icon svgIcon="github-logo"></mat-icon>
                View Source
            </button>
            <button mat-menu-item (click)="openDiscordServer()">
                <mat-icon svgIcon="discord-logo"></mat-icon>
                Join the Discord
            </button>

        </mat-menu>
    </div>
    <div class="spacer">
        <span class="spacer-right"></span>
        @for (action of toolbarActionsArray$ | async; track trackByActionId($index, action)) {
        <button mat-icon-button class="toolbar-action" [@newActionAlert]="getAnimationState(action.id)"
            (@newActionAlert.done)="onAnimationDone($event, action.id)" [attr.aria-label]="action.tooltip"
            [matTooltip]="action.tooltip" (click)="onActionClick(action)">
            <mat-icon fontSet="material-symbols-outlined">{{ action.icon }}</mat-icon>
        </button>
        }
    </div>
</mat-toolbar>

<mat-drawer-container class="container" autosize>
    <mat-drawer #drawer class="sidenav" mode="side" [opened]="false">
        <div class="sidenav-top">
            <div class="panorama">
                <button mat-icon-button (click)="setTheme(false); toggleAnimation('day')"
                    class="theme-button day-button" [class.sink]="currentTheme === 'day'" [class.hover-effect]="true">
                    <mat-icon>wb_sunny</mat-icon>
                </button>
                <button mat-icon-button (click)="setTheme(true); toggleAnimation('night')"
                    class="theme-button night-button" [class.sink]="currentTheme === 'night'"
                    [class.hover-effect]="true">
                    <mat-icon>nightlight</mat-icon>
                </button>
            </div>
        </div>
        <div class="sidenav-content">
            @for (action of sideNavContentProvider.actions$ | async; track action.label) {
            <button mat-button (click)="action.action()">{{ action.label }}</button>
            <mat-divider></mat-divider>
            }
        </div>
    </mat-drawer>
    <router-outlet></router-outlet>

</mat-drawer-container>