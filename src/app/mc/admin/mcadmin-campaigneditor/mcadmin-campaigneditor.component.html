<div class="left">
    <mat-action-list>
        @if ((campaigns$ | async); as campaigns) {
        @for (campaign of campaigns; track campaign.getName()) {
        <button mat-list-item [class.selected]="selectedCampaign === campaign" (click)="selectCampaign(campaign)">
            {{campaign.getName()}}
        </button>
        }
        }
    </mat-action-list>
    <div class="button-bar">
        <button mat-flat-button color="primary" (click)="createNewCampaign()">
            <mat-icon>add</mat-icon>
            Add Example Campaign
        </button>
    </div>
</div>
<div class="right">
    @if (selectedCampaign) {
    <div class="campaign-details">
        <div class="header-with-actions">
            <h1>{{selectedCampaign.getName()}}</h1>
            <div class="title-button-panel">
                <button mat-icon-button (click)="renameCampaign(selectedCampaign)"
                    [disabled]="!selectedCampaign.canBeEdited()" matTooltip="Rename Campaign">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button (click)="deleteSelectedCampaign()" [disabled]="!selectedCampaign.canBeEdited()"
                    matTooltip="Delete Campaign">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </div>
        <div class="campaign-details-content">
            <div class="wrapper">

                <app-date-time-picker title="Region Deadline:" [(ngModel)]="editingCampaignData.regionDeadline"
                    (ngModelChange)="onDateTimeChange()">
                </app-date-time-picker>

                <app-date-time-picker title="Start Deadline:" [(ngModel)]="editingCampaignData.startDeadline"
                    (ngModelChange)="onDateTimeChange()">
                </app-date-time-picker>

                <app-date-time-picker title="First Session:" [(ngModel)]="editingCampaignData.firstSession"
                    (ngModelChange)="onDateTimeChange()">
                </app-date-time-picker>

                <app-date-time-picker title="First EU4 Session:" [(ngModel)]="editingCampaignData.firstEu4Session"
                    (ngModelChange)="onDateTimeChange()">
                </app-date-time-picker>
            </div>
            <div class="wrapper">
                <mat-form-field appearance="outline">
                    <mat-label>CK3 Map GeoJSON URL</mat-label>
                    <input matInput type="url" [(ngModel)]="editingCampaignData.ck3MapGeoJsonUrl" 
                        (ngModelChange)="onUrlChange()" placeholder="https://...">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Nations JSON URL</mat-label>
                    <input matInput type="url" [(ngModel)]="editingCampaignData.nationsJsonUrl" 
                        (ngModelChange)="onUrlChange()" placeholder="https://...">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>CK3 Regions Config URL</mat-label>
                    <input matInput type="url" [(ngModel)]="editingCampaignData.ck3RegionsConfigUrl" 
                        (ngModelChange)="onUrlChange()" placeholder="https://...">
                </mat-form-field>
            </div>
            <div class="wrapper">
                <mat-slide-toggle [(ngModel)]="editingCampaignData.signupsOpen" 
                    (ngModelChange)="onSettingsChange()">
                    Signups Open
                </mat-slide-toggle>

                <mat-form-field appearance="outline">
                    <mat-label>Moderator IDs (comma-separated)</mat-label>
                    <input matInput [(ngModel)]="editingCampaignData.moderatorIds" 
                        (ngModelChange)="onSettingsChange()" placeholder="123, 456, 789">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>CK3 Lobbies (comma-separated)</mat-label>
                    <input matInput [(ngModel)]="editingCampaignData.ck3LobbiesIdentifiers" 
                        (ngModelChange)="onSettingsChange()" placeholder="id1, id2, id3">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>EU4 Lobbies (comma-separated)</mat-label>
                    <input matInput [(ngModel)]="editingCampaignData.eu4LobbiesIdentifiers" 
                        (ngModelChange)="onSettingsChange()" placeholder="id1, id2, id3">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Vic3 Lobbies (comma-separated)</mat-label>
                    <input matInput [(ngModel)]="editingCampaignData.vic3LobbyIdentifiers" 
                        (ngModelChange)="onSettingsChange()" placeholder="id1, id2, id3">
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Possible Keys (comma-separated)</mat-label>
                    <input matInput [(ngModel)]="editingCampaignData.possibleKeys" 
                        (ngModelChange)="onSettingsChange()" placeholder="key1, key2, key3">
                </mat-form-field>
        </div>
    </div>
    }
</div>